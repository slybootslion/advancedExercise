{"version":3,"file":"bundle.js","sources":["../src/reactivity/effect.ts","../src/utils/index.ts","../src/reactivity/baseHandler.ts","../src/reactivity/reactive.ts"],"sourcesContent":["const effectStack: Function[] = []\r\n\r\nfunction createReactiveEffect(fun) {\r\n  const effect = function () {\r\n    effectStack.push(effect)\r\n    fun()\r\n  }\r\n  return effect\r\n}\r\n\r\nfunction effect(fun, opts = {}) {\r\n  const effect = createReactiveEffect(fun)\r\n  effect()\r\n}\r\n\r\nexport {\r\n  effect,\r\n  effectStack\r\n}\r\n","export function isObject(obj): boolean {\r\n  return typeof obj === 'object' && obj != null\r\n}\r\n","import {effectStack} from \"./effect\";\r\n\r\nconst mutableHandlers = {\r\n  get(target, key, recevier) {\r\n    // return target[key]\r\n    return Reflect.get(target, key, recevier)\r\n  },\r\n  set(target, key, value, recevier) {\r\n    // target[key] = value\r\n    Reflect.set(target, key, value, recevier)\r\n    effectStack.forEach(effect => effect())\r\n  }\r\n}\r\n\r\nexport {\r\n  mutableHandlers\r\n}\r\n","import {isObject} from \"../utils\";\r\nimport {mutableHandlers} from \"./baseHandler\";\r\n\r\nconst reactiveMap = new WeakMap()\r\n\r\nfunction createReactiveObject(target, baseHandler) {\r\n  if (!isObject(target)) return target\r\n  if (!reactiveMap.has(target)) {\r\n    const proxy = new Proxy(target, baseHandler)\r\n    reactiveMap.set(target, proxy)\r\n    return proxy\r\n  }\r\n  return reactiveMap.get(target)\r\n}\r\n\r\nfunction reactive(target) {\r\n  return createReactiveObject(target, mutableHandlers)\r\n}\r\n\r\nexport {\r\n  reactive\r\n}\r\n"],"names":[],"mappings":";;;;;;EAAA,MAAM,WAAW,GAAe,EAAE,CAAA;EAElC,SAAS,oBAAoB,CAAC,GAAG;MAC/B,MAAM,MAAM,GAAG;UACb,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;UACxB,GAAG,EAAE,CAAA;OACN,CAAA;MACD,OAAO,MAAM,CAAA;EACf,CAAC;EAED,SAAS,MAAM,CAAC,GAAG,EAAE,IAAI,GAAG,EAAE;MAC5B,MAAM,MAAM,GAAG,oBAAoB,CAAC,GAAG,CAAC,CAAA;MACxC,MAAM,EAAE,CAAA;EACV;;WCbgB,QAAQ,CAAC,GAAG;MAC1B,OAAO,OAAO,GAAG,KAAK,QAAQ,IAAI,GAAG,IAAI,IAAI,CAAA;EAC/C;;ECAA,MAAM,eAAe,GAAG;MACtB,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,QAAQ;;UAEvB,OAAO,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAA;OAC1C;MACD,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ;;UAE9B,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAA;UACzC,WAAW,CAAC,OAAO,CAAC,MAAM,IAAI,MAAM,EAAE,CAAC,CAAA;OACxC;GACF;;ECTD,MAAM,WAAW,GAAG,IAAI,OAAO,EAAE,CAAA;EAEjC,SAAS,oBAAoB,CAAC,MAAM,EAAE,WAAW;MAC/C,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;UAAE,OAAO,MAAM,CAAA;MACpC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;UAC5B,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,MAAM,EAAE,WAAW,CAAC,CAAA;UAC5C,WAAW,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;UAC9B,OAAO,KAAK,CAAA;OACb;MACD,OAAO,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;EAChC,CAAC;EAED,SAAS,QAAQ,CAAC,MAAM;MACtB,OAAO,oBAAoB,CAAC,MAAM,EAAE,eAAe,CAAC,CAAA;EACtD;;;;;;;;;;;"}