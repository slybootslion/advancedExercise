{"version":3,"file":"vue.js","sources":["../../src/observer/array.js","../../src/observer/dep.js","../../src/utils.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parse.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/observer/schedular.js","../../src/observer/watcher.js","../../src/vdom/index.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/render.js","../../src/global-api/index.js","../../src/index.js"],"sourcesContent":["const oldArrayProtoMethods = Array.prototype\n\nconst arrayMethods = Object.create(oldArrayProtoMethods)\n\nconst methods = ['push', 'pop', 'shift', 'unshift', 'splice', 'sort', 'reverse']\n\nmethods.forEach(method => {\n  //AOP\n  // 重写数组方法\n  arrayMethods[method] = function (...args) {\n    const result = oldArrayProtoMethods[method].call(this, ...args)\n    let inserted\n    const ob = this.__ob__\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args\n        break\n      case 'splice':\n        inserted = args.slice(2)\n        break\n      default:\n        break\n    }\n    if (inserted) ob.observeArray(inserted)\n    ob.dep.notify()\n    return result\n  }\n})\n\nexport { arrayMethods }\n","let id = 0\n\nclass Dep {\n  constructor() {\n    this.id = id++\n    // 属性去记住watcher\n    this.subs = []\n  }\n\n  // watcher记住属性\n  depend() {\n    Dep.target.addDep(this)\n  }\n\n  // 记录watcher\n  addSub(watcher) {\n    this.subs.push(watcher)\n  }\n\n  // 通知watcher渲染\n  notify() {\n    this.subs.forEach(watcher => watcher.update())\n  }\n}\n\nDep.target = null\n\nfunction pushTarget(watcher) {\n  Dep.target = watcher\n}\n\nfunction popTarget() {\n  Dep.target = null\n}\n\nexport default Dep\n\nexport { pushTarget, popTarget }\n","let fns = []\nlet waiting = false\n\nfunction flushCallback() {\n  for (let i = 0; i < fns.length; i++) {\n    const fn = fns[i]\n    fn()\n  }\n  fns = []\n  waiting = false\n}\n\nfunction nextTick(fn) {\n  fns.push(fn)\n  if (!waiting) {\n    // Vue3只使用了Promise其他兼容降级处理的过时玩意儿就不写了\n    Promise.resolve().then(flushCallback)\n    waiting = true\n  }\n}\n\nconst LIFECYCLE_HOOK = ['beforeCreate', 'created', 'beforeMount', 'mount']\nconst strats = {}\n\nfunction mergeHook(parentValue, childValue) {\n  if (childValue) {\n    if (parentValue) {\n      return parentValue.concat(childValue)\n    } else {\n      return [childValue]\n    }\n  } else {\n    return parentValue\n  }\n}\n\nLIFECYCLE_HOOK.forEach(hookStr => (strats[hookStr] = mergeHook))\n\nstrats.components = function (parentValue, childValue) {\n  const res = Object.create(parentValue)\n  for (const key in childValue) {\n    if (childValue.hasOwnProperty(key)) res[key] = childValue[key]\n  }\n  return res\n}\n\nfunction mergeOptions(parent, child) {\n  const options = {}\n\n  function mergeField(key) {\n    // 策略模式\n    if (strats[key]) {\n      return (options[key] = strats[key](parent[key], child[key]))\n    }\n    // 非特有策略，正常合并\n    if (isObject(parent[key]) && isObject(child[key])) {\n      options[key] = { ...parent[key], ...child[key] }\n    } else {\n      if (child[key]) {\n        options[key] = child[key]\n      } else {\n        options[key] = parent[key]\n      }\n    }\n  }\n\n  for (const parentKey in parent) {\n    if (parent.hasOwnProperty(parentKey)) {\n      mergeField(parentKey)\n    }\n  }\n\n  for (const childKey in child) {\n    if (child.hasOwnProperty(childKey)) {\n      if (!parent.hasOwnProperty(childKey)) {\n        mergeField(childKey)\n      }\n    }\n  }\n  return options\n}\n\nfunction isObject(obj) {\n  return typeof obj === 'object' && obj != null\n}\n\nfunction makeUp(str) {\n  const map = {}\n  str.split(',').forEach(tag => (map[tag] = true))\n  return map\n}\n\nfunction isReservedTag(tagName) {\n  return !!makeUp('a,p,div,ul,li,span,input,h1,h2,h3,h4,h5,h6,button')[tagName]\n}\n\nexport { nextTick, mergeOptions, isObject, isReservedTag }\n","import { arrayMethods } from './array'\nimport Dep from './dep'\nimport { isObject } from '../utils'\n\nfunction dependArray(value) {\n  for (let i = 0; i < value.length; i++) {\n    const item = value[i]\n    item.__ob__ && item.__ob__.dep.depend()\n    if (Array.isArray(item)) dependArray(item)\n  }\n}\n\nfunction defineReactive(data, key, value) {\n  const dataOb = observe(value) // 对结果，递归拦截\n  const dep = new Dep()\n  Object.defineProperty(data, key, {\n    get() {\n      if (Dep.target) {\n        dep.depend()\n        if (dataOb) {\n          dataOb.dep.depend()\n          if (Array.isArray(value)) dependArray(value)\n        }\n      }\n      return value\n    },\n    set(nValue) {\n      if (nValue === value) return\n      observe(nValue)\n      value = nValue\n      dep.notify()\n    },\n  })\n}\n\nclass Observer {\n  constructor(value) {\n    // value.__ob__ = this\n    this.dep = new Dep()\n    Object.defineProperty(value, '__ob__', {\n      value: this,\n      enumerable: false,\n      configurable: false,\n    })\n\n    if (Array.isArray(value)) {\n      // value.__proto__ = arrayMethods\n      Object.setPrototypeOf(value, arrayMethods)\n      this.observeArray(value)\n    } else {\n      this.walk(value)\n    }\n  }\n\n  walk(data) {\n    Object.keys(data).forEach(key => {\n      const val = data[key]\n      defineReactive(data, key, val)\n    })\n  }\n\n  observeArray(arr) {\n    for (let i = 0; i < arr.length; i++) {\n      observe(arr[i])\n    }\n  }\n}\n\nfunction observe(data) {\n  if (!isObject(data)) return\n  if (data.__ob__) return\n  return new Observer(data)\n}\n\nexport { observe }\n","import { observe } from './observer/index'\n\nfunction initState(vm) {\n  // 将所有的数据定义在vm上，后续更改时，触发试图的更新\n  const opts = vm.$options\n  if (opts.data) {\n    initData(vm)\n  }\n}\n\nfunction proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key]\n    },\n    set(nValue) {\n      vm[source][key] = nValue\n    },\n  })\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data\n\n  for (const dataKey in data) {\n    proxy(vm, '_data', dataKey)\n  }\n\n  // 观测数据\n  observe(data)\n}\n\nexport { initState }\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`) // 标签开头的正则 捕获的内容是标签名\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`) // 匹配结尾的标签 </div>\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/ // 匹配属性\r\nconst startTagClose = /^\\s*(\\/?)>/ // 匹配结束的标签 >\r\n\r\nfunction parseHTML(html) {\r\n  // 生成ast语法树\r\n  function createASTElement(tag, attrs) {\r\n    return { tag, type: 1, children: [], attrs, parent: null }\r\n  }\r\n\r\n  let root = null\r\n  let currentParent\r\n  const stack = []\r\n\r\n  function advance(n) {\r\n    html = html.substring(n)\r\n  }\r\n\r\n  function start(tagName, attrs) {\r\n    const element = createASTElement(tagName, attrs)\r\n    if (!root) {\r\n      root = element\r\n    }\r\n    currentParent = element\r\n    stack.push(element)\r\n  }\r\n\r\n  function end(tagName) {\r\n    const element = stack.pop()\r\n    currentParent = stack[stack.length - 1]\r\n    if (currentParent) {\r\n      element.parent = currentParent\r\n      currentParent.children.push(element)\r\n    }\r\n  }\r\n\r\n  function chars(text) {\r\n    text = text.trim()\r\n    if (text) {\r\n      currentParent.children.push({\r\n        type: 3,\r\n        text,\r\n      })\r\n    }\r\n  }\r\n\r\n  function parseStartTag() {\r\n    const start = html.match(startTagOpen)\r\n    if (start) {\r\n      let match = {\r\n        tagName: start[1],\r\n        attrs: [],\r\n      }\r\n      advance(start[0].length)\r\n      // 查找属性 （开始标签开头和结尾中间的部分）\r\n      let end, attr\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        advance(attr[0].length)\r\n        match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] || true })\r\n      }\r\n      if (end) {\r\n        advance(end[0].length)\r\n        return match\r\n      }\r\n    }\r\n  }\r\n\r\n  while (html) {\r\n    const textEnd = html.indexOf('<')\r\n    if (textEnd === 0) {\r\n      // 开始标签\r\n      const startTagMatch = parseStartTag()\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs)\r\n        continue\r\n      }\r\n      // 结束标签\r\n      let endTagMatch = html.match(endTag)\r\n      if (endTagMatch) {\r\n        advance(endTagMatch[0].length)\r\n        end(endTagMatch[1])\r\n        continue\r\n      }\r\n    }\r\n\r\n    let text\r\n    if (textEnd > 0) {\r\n      text = html.substring(0, textEnd)\r\n    }\r\n    if (text) {\r\n      advance(text.length)\r\n      chars(text)\r\n    }\r\n  }\r\n\r\n  return root\r\n}\r\n\r\nexport {\r\n  parseHTML\r\n}\r\n","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\n\nfunction genAttr(attrs) {\n  let str = ''\n  for (let i = 0; i < attrs.length; i++) {\n    const attr = attrs[i]\n    if (attr.name === 'style') {\n      const obj = {}\n      attr.value.split(';').forEach(item => {\n        const itemArr = item.split(':')\n        obj[itemArr[0]] = itemArr[1]\n      })\n      attr.value = obj\n    }\n    str += `${attr.name}: ${JSON.stringify(attr.value)},`\n  }\n  return `{ ${str.slice(0, -1)}}`\n}\n\n// 区分元素还是文本\nfunction gen(child) {\n  if (child.type === 1) {\n    // 元素 递归调用\n    return generate(child)\n  } else {\n    // 文本\n    const t = child.text\n    if (defaultTagRE.test(t)) {\n      // 插值表达式\n      const tokens = []\n      let match\n      let index = 0\n      let lastIdx = (defaultTagRE.lastIndex = 0)\n\n      while ((match = defaultTagRE.exec(t))) {\n        index = match.index\n        if (index > lastIdx) {\n          tokens.push(JSON.stringify(t.slice(lastIdx, index)))\n        }\n        tokens.push(`_s(${match[1].trim()})`)\n        lastIdx = index + match[0].length\n      }\n\n      if (lastIdx < t.length) tokens.push(JSON.stringify(t.slice(lastIdx)))\n\n      return `_v(${tokens.join('+')})`\n    } else {\n      // 普通文本\n      return `_v(${JSON.stringify(t)})`\n    }\n  }\n}\n\nfunction genChildren(children) {\n  if (children) {\n    return children.map(child => gen(child)).join(',')\n  }\n}\n\n// ast -> str -> Function\nfunction generate(ast) {\n  return `_c('${ast.tag}', ${ast.attrs.length ? genAttr(ast.attrs) : undefined} ${\n    ast.children ? `,${genChildren(ast.children)}` : ''\n  })`\n}\n\nexport { generate }\n","import { parseHTML } from './parse'\nimport { generate } from './generate'\n\nfunction compileToFunctions(template) {\n  const ast = parseHTML(template)\n  const code = generate(ast)\n  const render = `with(this) {\n    return ${code}\n  }`\n  // 字符串变函数\n  return new Function(render)\n}\n\nexport { compileToFunctions }\n","import { nextTick } from '../utils'\n\nlet has = {}\nlet queue = []\nlet waiting = false\n\nfunction flushSchedulerQueue() {\n  for (let i = 0; i < queue.length; i++) {\n    const watcher = queue[i]\n    watcher.run()\n  }\n  queue = []\n  has = {}\n  waiting = false\n}\n\nfunction queueWatcher(watcher) {\n  // 更新时对watcher去重\n  const id = watcher.id\n  if (has[id] == null) {\n    queue.push(watcher)\n    has[id] = true\n    // Promise.resolve().then(flushSchedulerQueue)\n    if (!waiting) {\n      nextTick(flushSchedulerQueue)\n      waiting = true\n    }\n  }\n}\n\nexport { queueWatcher }\n","import { popTarget, pushTarget } from './dep'\nimport { queueWatcher } from \"./schedular\";\n\nlet id = 0\n\nclass Watcher {\n  constructor(vm, fn, cb, options) {\n    this.vm = vm\n    this.getter = fn\n    this.cb = cb\n    this.options = options\n    this.id = id++\n    this.dep = []\n    this.depsId = new Set()\n    // 调用render方法，对模板中的数进行取值\n    this.get()\n  }\n\n  get() {\n    pushTarget(this)\n    // 对属性进行取值操作\n    this.getter()\n    popTarget()\n  }\n\n  addDep(dep) {\n    // 记录watcher\n    if (!this.depsId.has(dep.id)) {\n      this.dep.push(dep)\n      this.depsId.add(dep.id)\n      dep.addSub(this)\n    }\n  }\n\n  run() {\n    this.get()\n  }\n\n  update() {\n    queueWatcher(this)\n  }\n}\n\nexport { Watcher }\n","import { isObject, isReservedTag } from '../utils'\n\nfunction createElement(vm, tag, data = {}, ...children) {\n  if (isReservedTag(tag)) {\n    return vNode(vm, tag, data, data.key, children, undefined)\n  }\n  // 组件 Ctor即Sub\n  const Ctor = vm.$options.components[tag]\n  return createComponent(vm, tag, data, data.key, children, Ctor)\n}\n\nfunction createTextVNode(vm, t) {\n  return vNode(vm, undefined, undefined, undefined, undefined, t)\n}\n\nfunction createComponent(vm, tag, data, key, children, Ctor) {\n  if (isObject(Ctor)) {\n    Ctor = vm.$options._base.extend(Ctor)\n  }\n  // 组件添加生命周期\n  data.hook = {\n    init(vNode) {\n      const child = vNode.componentInstance = new vNode.componentOpts.Ctor({})\n      child.$mount()\n    },\n  }\n  return vNode(vm, `vue-component-${tag + Ctor.cid}`, data, key, undefined, undefined, { Ctor })\n}\n\nfunction vNode(vm, tag, data, key, children, txt, componentOpts) {\n  return { vm, tag, data, key, children, txt, componentOpts }\n}\n\n\nfunction isSameVNode(n1, n2) {\n  return n1.tag === n2.tag && n1.key === n2.key\n}\n\nexport { createElement, createTextVNode, isSameVNode }\n","import { isSameVNode } from './index'\n\nfunction patch(oldVNode, vNode) {\n  if (!oldVNode) return createEl(vNode)\n  const isRealElement = oldVNode.nodeType\n  if (isRealElement) {\n    // 初次渲染\n    const parentEl = oldVNode.parentNode\n    const el = createEl(vNode)\n    parentEl.insertBefore(el, oldVNode.nextSibling)\n    parentEl.removeChild(oldVNode)\n    return el\n  } else {\n    // diff 两个虚拟节点的比对\n    if (oldVNode.tag !== vNode.tag) {\n      return oldVNode.el.parentNode.replaceChild(createEl(vNode), oldVNode.el)\n    }\n    if (!oldVNode.tag && oldVNode.txt !== vNode.txt) {\n      return (oldVNode.el.textContent = vNode.txt)\n    }\n    const el = (vNode.el = oldVNode.el)\n    updateProperties(vNode, oldVNode.data)\n\n    // 子节点的比对\n    const childrenOld = oldVNode.children || []\n    const childrenNew = vNode.children || []\n    if (childrenOld.length && childrenNew.length) {\n      updateChildren(el, childrenOld, childrenNew)\n    } else if (childrenOld.length) {\n      el.innerHTML = ''\n    } else if (childrenNew.length) {\n      childrenNew.forEach(child => el.appendChild(createEl(child)))\n    }\n  }\n}\n\n// 判断是组件还是原始标签\nfunction createComponent(vNode) {\n  let i = vNode.data\n  if ((i = i.hook) && (i = i.init)) i(vNode)\n  return !!vNode.componentInstance\n}\n\n// 创建正式节点\nfunction createEl(vNode) {\n  const { vm, tag, children, key, data, txt } = vNode\n  if (typeof tag === 'string') {\n    // 真实节点 或 组件\n    if (createComponent(vNode)) return vNode.componentInstance.$el\n\n    vNode.el = document.createElement(tag)\n    updateProperties(vNode)\n    children.forEach(child => {\n      vNode.el.appendChild(createEl(child))\n    })\n  } else {\n    // 文本节点\n    vNode.el = document.createTextNode(txt)\n  }\n  return vNode.el\n}\n\n// 创建属性\nfunction updateProperties(vNode, oldProps = {}) {\n  const props = vNode.data || {}\n  const el = vNode.el\n\n  // 老的属性新的没有（删除）\n  for (const oldKey in oldProps) {\n    if (!props[oldKey]) {\n      el.removeAttribute(oldKey)\n    }\n  }\n\n  // 样式特殊处理\n  const styleNew = props.style || {}\n  const styleOld = oldProps.style || {}\n  for (const oldKey in styleOld) {\n    if (!styleNew[oldKey]) {\n      el.style[oldKey] = ''\n    }\n  }\n\n  // 新的属性老的没有\n  for (const propsKey in props) {\n    if (props.hasOwnProperty(propsKey)) {\n      const value = props[propsKey]\n      if (propsKey === 'style') {\n        for (const styleKey in props.style) {\n          el.style[styleKey] = value[styleKey]\n        }\n      } else {\n        el.setAttribute(propsKey, value)\n      }\n    }\n  }\n}\n\n// 更新子节点\nfunction updateChildren(el, childrenOld, childrenNew) {\n  let oldStartIndex = 0\n  let oldEndIndex = childrenOld.length - 1\n  let oldStartVNode = childrenOld[0]\n  let oldEndVNode = childrenOld[oldEndIndex]\n\n  let newStartIndex = 0\n  let newEndIndex = childrenNew.length - 1\n  let newStartVNode = childrenNew[0]\n  let newEndVNode = childrenNew[newEndIndex]\n\n  while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\n    if (isSameVNode(oldStartVNode, newStartVNode)) {\n      patch(oldStartVNode, newStartVNode)\n      oldStartVNode = childrenOld[++oldStartIndex]\n      newStartVNode = childrenNew[++newStartIndex]\n    } else if (isSameVNode(oldEndVNode, newEndVNode)) {\n      patch(oldEndVNode, newEndVNode)\n      oldEndVNode = childrenOld[--oldEndIndex]\n      newEndVNode = childrenNew[--newEndIndex]\n    } else if (isSameVNode(oldStartVNode, newEndVNode)) {\n      patch(oldStartVNode, newEndVNode)\n      el.insertBefore(oldStartVNode.el, oldEndVNode.el.nextSibling)\n      oldStartVNode = childrenOld[++oldStartIndex]\n      newEndVNode = childrenNew[--newEndIndex]\n    } else if (isSameVNode(oldEndVNode, newStartVNode)) {\n      patch(oldEndVNode, newStartVNode)\n      el.insertBefore(oldEndVNode.el, oldStartVNode.el)\n      oldEndVNode = childrenOld[--oldEndIndex]\n      newStartVNode = childrenNew[++newStartIndex]\n    } else {\n    }\n  }\n\n  if (newStartIndex <= newEndIndex) {\n    for (let i = newStartIndex; i <= newEndIndex; i++) {\n      const nextEl = childrenNew[newEndIndex + 1] == null ? null : childrenNew[newEndIndex + 1].el\n      // el.appendChild(createEl(childrenNew[i]))\n      // 如果insertBefore==null相当于appendChild\n      el.insertBefore(createEl(childrenNew[i]), nextEl)\n    }\n  }\n}\n\nexport { patch, createEl }\n","import { Watcher } from './observer/watcher'\nimport { patch } from './vdom/patch'\n\nfunction mountComponent(vm) {\n  const updateComponent = () => {\n    vm._update(vm._render())\n  }\n  // 默认通过watcher渲染\n  new Watcher(vm, updateComponent, () => {}, true)\n}\n\nfunction lifecycleMixin(Vue) {\n  Vue.prototype._update = function (vNode) {\n    const vm = this\n    // vm.$el = patch(vm.$options.el, vNode)\n    vm.$el = patch(vm.$el, vNode)\n  }\n}\n\nfunction callHook(vm, hook) {\n  const handle = vm.$options[hook]\n  if (handle) handle.forEach(fn => fn.call(vm))\n}\n\nexport { mountComponent, lifecycleMixin, callHook }\n","import { initState } from './state'\nimport { compileToFunctions } from './compiler/index'\nimport { callHook, mountComponent } from './lifecycle'\nimport { mergeOptions, nextTick } from './utils'\n\nfunction initMixin(Vue) {\n  // Vue的初始化\n  Vue.prototype._init = function (options) {\n    const vm = this\n    // vm.$options = options\n    // 合并选项（如：mixin生命周期，components等）\n    vm.$options = mergeOptions(vm.constructor.options, options)\n    callHook(vm, 'beforeCreate')\n    // 状态初始化\n    initState(vm)\n    callHook(vm, 'created')\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el)\n    }\n  }\n\n  Vue.prototype.$mount = function (el) {\n    el = el && document.querySelector(el)\n    const vm = this\n    const options = vm.$options\n    vm.$el = el\n    if (!options.render) {\n      let template = options.template\n      if (!template && el) {\n        template = el.outerHTML\n      }\n      options.render = compileToFunctions(template)\n    }\n    // 组件挂载\n    mountComponent(vm)\n  }\n\n  Vue.prototype.$nextTick = nextTick\n}\n\nexport { initMixin }\n","import { createElement, createTextVNode } from './vdom/index'\n\nfunction renderMixin(Vue) {\n  Vue.prototype._c = function (...args) {\n    return createElement(this, ...args)\n  }\n\n  Vue.prototype._v = function (text) {\n    return createTextVNode(this, text)\n  }\n\n  Vue.prototype._s = function (val) {\n    return val == null ? '' : typeof val === 'object' ? JSON.stringify(val) : val\n  }\n\n  Vue.prototype._render = function () {\n    const vm = this\n    const render = vm.$options.render\n    const vNode = render.call(vm)\n\n    return vNode\n  }\n}\n\nexport { renderMixin }\n","// 混合全局API\nimport { mergeOptions } from '../utils'\n\nfunction initGlobalAPI(Vue) {\n  // 存放全局配置\n  Vue.options = {}\n  Vue.options._base = Vue\n\n  Vue.mixin = function (mixin) {\n    // this是大Vue mergeOptions本质是个对象合并的方法\n    this.options = mergeOptions(this.options, mixin)\n    return this\n  }\n\n  // 存放定义的组件\n  Vue.options.components = {}\n  Vue.component = function (id, opts) {\n    opts.name = opts.name || id\n    opts = Vue.options._base.extend(opts)\n    this.options.components[id] = opts\n  }\n\n  let cid = 0\n  Vue.extend = function (opts) {\n    const Super = this\n    const Sub = function (opts) {\n      this._init(opts)\n    }\n    // 子类继承父类\n    Sub.cid = cid++\n    Sub.prototype = Object.create(Super.prototype)\n    Sub.prototype.constructor = Sub\n    Sub.component = Super.component\n    Sub.options = mergeOptions(Super.options, opts)\n    return Sub\n  }\n}\n\nexport { initGlobalAPI }\n","import { initMixin } from './init'\nimport { lifecycleMixin } from './lifecycle'\nimport { renderMixin } from './render'\nimport { initGlobalAPI } from './global-api/index'\nimport { compileToFunctions } from './compiler/index'\nimport { createEl, patch } from './vdom/patch'\n\nfunction Vue(options) {\n  this._init(options)\n}\n\ninitMixin(Vue)\nlifecycleMixin(Vue)\nrenderMixin(Vue)\ninitGlobalAPI(Vue)\n\n/*eg.*/\nconst vm = new Vue({\n  data: {\n    template: 'diff-temp',\n  },\n})\n\nconst renderFn = compileToFunctions(`<div id=\"a\" a=\"1\" style=\"color:blue\">\n  <p key=\"A\">A</p>\n  <p key=\"B\">B</p>\n  <p key=\"C\">C</p>\n  <p key=\"D\">D</p>\n</div>`)\nconst vNode = renderFn.call(vm)\nconsole.log(vNode)\nconst el = createEl(vNode)\ndocument.body.appendChild(el)\n\nconst vmC = new Vue({\n  data: {\n    template: 'diff-temp-change',\n  },\n})\n\nconst renderFnC = compileToFunctions(`<div id=\"a\" a=\"1\" style=\"color:#fff;background:red\">\n  <p key=\"A\">A</p>\n  <p key=\"B\">B</p>\n  <p key=\"C\">C</p>\n  <p key=\"D\">D</p>\n  <p key=\"E\">E</p>\n</div>`)\nconst vNodeC = renderFnC.call(vmC)\nsetTimeout(() => {\n  patch(vNode, vNodeC)\n}, 1000)\nexport default Vue\n"],"names":["oldArrayProtoMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","result","call","inserted","ob","__ob__","slice","observeArray","dep","notify","id","Dep","subs","target","addDep","watcher","push","update","pushTarget","popTarget","fns","waiting","flushCallback","i","length","fn","nextTick","Promise","resolve","then","LIFECYCLE_HOOK","strats","mergeHook","parentValue","childValue","concat","hookStr","components","res","key","hasOwnProperty","mergeOptions","parent","child","options","mergeField","isObject","parentKey","childKey","obj","makeUp","str","map","split","tag","isReservedTag","tagName","dependArray","value","item","depend","isArray","defineReactive","data","dataOb","observe","defineProperty","get","set","nValue","Observer","enumerable","configurable","setPrototypeOf","walk","keys","val","arr","initState","vm","opts","$options","initData","proxy","source","_data","dataKey","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","createASTElement","attrs","type","children","root","currentParent","stack","advance","n","substring","start","element","end","pop","chars","text","trim","parseStartTag","match","attr","name","textEnd","indexOf","startTagMatch","endTagMatch","defaultTagRE","genAttr","itemArr","JSON","stringify","gen","generate","t","test","tokens","index","lastIdx","lastIndex","exec","join","genChildren","ast","undefined","compileToFunctions","template","code","render","Function","has","queue","flushSchedulerQueue","run","queueWatcher","Watcher","cb","getter","depsId","Set","add","addSub","createElement","vNode","Ctor","createComponent","createTextVNode","_base","extend","hook","init","componentInstance","componentOpts","$mount","cid","txt","isSameVNode","n1","n2","patch","oldVNode","createEl","isRealElement","nodeType","parentEl","parentNode","el","insertBefore","nextSibling","removeChild","replaceChild","textContent","updateProperties","childrenOld","childrenNew","updateChildren","innerHTML","appendChild","$el","document","createTextNode","oldProps","props","oldKey","removeAttribute","styleNew","style","styleOld","propsKey","styleKey","setAttribute","oldStartIndex","oldEndIndex","oldStartVNode","oldEndVNode","newStartIndex","newEndIndex","newStartVNode","newEndVNode","nextEl","mountComponent","updateComponent","_update","_render","lifecycleMixin","Vue","callHook","handle","initMixin","_init","constructor","querySelector","outerHTML","$nextTick","renderMixin","_c","_v","_s","initGlobalAPI","mixin","component","Super","Sub","renderFn","console","log","body","vmC","renderFnC","vNodeC","setTimeout"],"mappings":"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"}