{"version":3,"file":"vue.js","sources":["../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["function defineReactive(data, key, value) {\n  Object.defineProperty(data, key, {\n    get() {\n      return value\n    },\n    set(nValue) {\n      if (nValue === value) return\n      value = nValue\n    },\n  })\n}\n\nclass Observer {\n  constructor(value) {\n    this.walk(value)\n  }\n\n  walk(data) {\n    Object.keys(data).forEach(key => {\n      const val = data[key]\n      defineReactive(data, key, val)\n    })\n  }\n}\n\nfunction observe(data) {\n  if (typeof data !== 'object' || data == null) return\n  return new Observer(data)\n}\n\nexport { observe }\n","import { observe } from './observer/index'\n\nfunction initState(vm) {\n  // 将所有的数据定义在vm上，后续更改时，触发试图的更新\n  const opts = vm.$options\n  if (opts.data) {\n    initData(vm)\n  }\n}\n\nfunction proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key]\n    },\n    set(nValue) {\n      vm[source][key] = nValue\n    },\n  })\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data\n\n  for (const dataKey in data) {\n    proxy(vm, '_data', dataKey)\n  }\n\n  // 观测数据\n  observe(data)\n}\n\nexport { initState }\n","import { initState } from \"./state\";\n\nfunction initMixin(Vue) {\n  // Vue的初始化\n  Vue.prototype._init = function (options) {\n    const vm = this\n    vm.$options = options\n    initState(vm)\n  }\n}\n\nexport { initMixin }\n","import { initMixin } from \"./init\";\n\nfunction Vue(options) {\n  this._init(options)\n}\n\ninitMixin(Vue)\n\nexport default Vue\n"],"names":["defineReactive","data","key","value","Object","defineProperty","get","set","nValue","Observer","walk","keys","forEach","val","observe","initState","vm","opts","$options","initData","proxy","source","_data","call","dataKey","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA,SAASA,cAAT,CAAwBC,IAAxB,EAA8BC,GAA9B,EAAmCC,KAAnC,EAA0C;EACxCC,EAAAA,MAAM,CAACC,cAAP,CAAsBJ,IAAtB,EAA4BC,GAA5B,EAAiC;EAC/BI,IAAAA,GAD+B,iBACzB;EACJ,aAAOH,KAAP;EACD,KAH8B;EAI/BI,IAAAA,GAJ+B,eAI3BC,MAJ2B,EAInB;EACV,UAAIA,MAAM,KAAKL,KAAf,EAAsB;EACtBA,MAAAA,KAAK,GAAGK,MAAR;EACD;EAP8B,GAAjC;EASD;;MAEKC;EACJ,oBAAYN,KAAZ,EAAmB;EAAA;;EACjB,SAAKO,IAAL,CAAUP,KAAV;EACD;;;;2BAEIF,MAAM;EACTG,MAAAA,MAAM,CAACO,IAAP,CAAYV,IAAZ,EAAkBW,OAAlB,CAA0B,UAAAV,GAAG,EAAI;EAC/B,YAAMW,GAAG,GAAGZ,IAAI,CAACC,GAAD,CAAhB;EACAF,QAAAA,cAAc,CAACC,IAAD,EAAOC,GAAP,EAAYW,GAAZ,CAAd;EACD,OAHD;EAID;;;;;;EAGH,SAASC,OAAT,CAAiBb,IAAjB,EAAuB;EACrB,MAAI,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,IAAI,IAAxC,EAA8C;EAC9C,SAAO,IAAIQ,QAAJ,CAAaR,IAAb,CAAP;EACD;;EC1BD,SAASc,SAAT,CAAmBC,EAAnB,EAAuB;EACrB;EACA,MAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB;;EACA,MAAID,IAAI,CAAChB,IAAT,EAAe;EACbkB,IAAAA,QAAQ,CAACH,EAAD,CAAR;EACD;EACF;;EAED,SAASI,KAAT,CAAeJ,EAAf,EAAmBK,MAAnB,EAA2BnB,GAA3B,EAAgC;EAC9BE,EAAAA,MAAM,CAACC,cAAP,CAAsBW,EAAtB,EAA0Bd,GAA1B,EAA+B;EAC7BI,IAAAA,GAD6B,iBACvB;EACJ,aAAOU,EAAE,CAACK,MAAD,CAAF,CAAWnB,GAAX,CAAP;EACD,KAH4B;EAI7BK,IAAAA,GAJ6B,eAIzBC,MAJyB,EAIjB;EACVQ,MAAAA,EAAE,CAACK,MAAD,CAAF,CAAWnB,GAAX,IAAkBM,MAAlB;EACD;EAN4B,GAA/B;EAQD;;EAED,SAASW,QAAT,CAAkBH,EAAlB,EAAsB;EACpB,MAAIf,IAAI,GAAGe,EAAE,CAACE,QAAH,CAAYjB,IAAvB;EACAA,EAAAA,IAAI,GAAGe,EAAE,CAACM,KAAH,GAAW,OAAOrB,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACsB,IAAL,CAAUP,EAAV,CAA7B,GAA6Cf,IAA/D;;EAEA,OAAK,IAAMuB,OAAX,IAAsBvB,IAAtB,EAA4B;EAC1BmB,IAAAA,KAAK,CAACJ,EAAD,EAAK,OAAL,EAAcQ,OAAd,CAAL;EACD,GANmB;;;EASpBV,EAAAA,OAAO,CAACb,IAAD,CAAP;EACD;;EC7BD,SAASwB,SAAT,CAAmBC,GAAnB,EAAwB;EACtB;EACAA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAAUC,OAAV,EAAmB;EACvC,QAAMb,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcW,OAAd;EACAd,IAAAA,SAAS,CAACC,EAAD,CAAT;EACD,GAJD;EAKD;;ECPD,SAASU,GAAT,CAAaG,OAAb,EAAsB;EACpB,OAAKD,KAAL,CAAWC,OAAX;EACD;;EAEDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}