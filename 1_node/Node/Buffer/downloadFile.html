<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>文件下载 二进制文件读取</title>
</head>
<body>
<button id="btn">点击创建文件下载</button>
<p></p>
<input type="file" id="input">
</body>
<script type="text/javascript" charset="utf-8">
/* 文件下载 */
const btn = document.getElementById('btn')
btn.addEventListener('click', () => {
  const str = '<div>这是一个字符串文本</div>'
  const blob = new Blob([str], {
    type: 'text/html'
  })
  const a = document.createElement('a')
  a.setAttribute('download', 'index.html')
  a.href = URL.createObjectURL(blob)
  a.click()
})

/* 二进制文件读取 */
const input = document.getElementById('input')
input.addEventListener('change', (e) => {
  let file = e.target.files[0]

  // 方式一 异步
  /*let fileReader = new FileReader()
  fileReader.onload = function () {
    let img = document.createElement('img')
    img.src = fileReader.result
    document.body.appendChild(img)
  }
  fileReader.readAsDataURL(file) // base64*/

  // 方式二
  let img = document.createElement('img')
  const url = URL.createObjectURL(file)
  img.src = url
  document.body.appendChild(img)
  // URL.revokeObjectURL(url) 释放资源

})

</script>
</html>
