<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Question-5</title>
</head>
<body>
<script>

async function async1 () {
  console.log('async1 start')
  await async2()
}

async function async2 () {
  console.log('async2')
}

console.log('script start')

setTimeout(function () {
  console.log('setTimeout')
}, 0)

async1()

new Promise(function (resolve) {
  console.log('promise1')
  resolve()
}).then(function () {
  console.log('promise2')
})

console.log('script end')

// script start
// async1 start
// async2
// promise1
// script end
// promise2
// setTimeout

const flatArr = [1, 2, 3, [1, 2, 3, 4, [2, 3, 4]]]

function flatArrFn(arr) {
  return arr.reduce((res, cur) => {
    return Array.isArray(cur) ? [...res, ...flatArrFn(cur)] : [...res, cur]
  }, [])
}

const arr = flatArrFn(flatArr)

console.log(arr)

Array.prototype.myFilter = function(fn, ctx) {
  if (!Array.isArray(this)) throw new TypeError('err')
  if (typeof fn !== 'function') throw new TypeError('err')

  const len = this.length
  const arr = []

  for (let i = 0; i < len; i++) {
    const item = this[i];
    if (!Object.hasOwnProperty(i)) break
    fn.call(ctx, item, i, this) && arr.push(item)
  }

  return arr
}

const filterArr = arr.filter((item, i, arr) => {
  return item > 2
})

console.log(filterArr)

</script>
</body>
</html>
